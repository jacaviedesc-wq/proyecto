<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <title>{{ texts["menu_title"] }}</title>
    
    <!-- Estilos -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_menu.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_modal_menu.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
    {% include "navbar.html" %}

    <main class="menu-container">
        <h1>{{ texts["menu_title"] }}</h1>
        <p>{{ texts["menu_subtitle"] }}</p>

        <div class="dashboard">
            <div class="card" id="btnImpactos">
                <img src="{{ url_for('static', filename='img/Panda.png') }}" alt="Panda" class="mascota">
                <i class="fas fa-seedling"></i>
                <h2>{{ texts["impactos"] }}</h2>
            </div>

            <div class="card" id="btnConfig">
                <img src="{{ url_for('static', filename='img/Tucan.png') }}" alt="Tucán" class="mascota">
                <i class="fas fa-sliders-h"></i>
                <h2>{{ texts["config"] }}</h2>
            </div>

            <div class="card" id="btnTickets">
                <img src="{{ url_for('static', filename='img/Jirafa.png') }}" alt="Jirafa" class="mascota">
                <i class="fas fa-ticket-alt"></i>
                <h2>{{ texts["tickets"] }}</h2>
            </div>
        </div>
    </main>

    {% include "pie_de_pagina.html" %}

    <!-- Modal 1: Impactos Ambientales -->
    <div id="modalImpactos" class="modal">
        <div class="modal-content">
            <span class="close cerrarImpactos">&times;</span>
            <iframe 
                src="{{ url_for('impactos_ambientales') }}" 
                width="100%" height="600px" 
                style="border:none; border-radius:10px;">
            </iframe>
        </div>
    </div>

    <!-- Modal 2: Configuración del Perfil -->
    <div id="modalConfig" class="modal">
        <div class="modal-content perfil">
            <span class="close cerrarConfig">&times;</span>
            <h2>Configuración del Perfil</h2>
            <p class="subtitulo">Actualiza tu información personal</p>

            <form id="formPerfil" class="form-perfil" method="POST" action="{{ url_for('actualizar_perfil') }}">
                <div class="form-row">
                    <div class="form-group">
                        <label for="primer_nombre">Primer Nombre</label>
                        <input type="text" id="primer_nombre" name="primer_nombre" required>
                    </div>
                    <div class="form-group">
                        <label for="segundo_nombre">Segundo Nombre</label>
                        <input type="text" id="segundo_nombre" name="segundo_nombre">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="primer_apellido">Primer Apellido</label>
                        <input type="text" id="primer_apellido" name="primer_apellido" required>
                    </div>
                    <div class="form-group">
                        <label for="segundo_apellido">Segundo Apellido</label>
                        <input type="text" id="segundo_apellido" name="segundo_apellido">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="documento">Documento</label>
                        <input type="text" id="documento" name="documento" required>
                    </div>
                    <div class="form-group">
                        <label for="genero">Género</label>
                        <select id="genero" name="genero" required>
                            <option value="">Seleccione...</option>
                            <option value="Femenino">Femenino</option>
                            <option value="Masculino">Masculino</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="celular">Celular</label>
                        <input type="tel" id="celular" name="celular" required>
                    </div>
                    <div class="form-group">
                        <label for="correo">Correo electrónico</label>
                        <input type="email" id="correo" name="correo" required>
                    </div>
                </div>

                <div class="form-group direccion">
                    <label for="direccion">Dirección</label>
                    <input type="text" id="direccion" name="direccion" required>
                </div>

                <div class="botones">
                    <button type="submit" class="btn-guardar">Guardar Cambios</button>
                    <button type="button" class="btn-cancelar cerrarConfig">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal 3: Registro de Reportes (Tickets) -->
    <div id="modalTickets" class="modal">
        <div class="modal-content">
            <span class="close cerrarTickets">&times;</span>
            <iframe 
                src="{{ url_for('registro_reporte') }}" 
                width="100%" height="600px" 
                style="border:none; border-radius:10px;">
            </iframe>
        </div>
    </div>

    <!-- Script para abrir/cerrar modales -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {

            // Modal Impactos Ambientales
            const btnImpactos = document.getElementById("btnImpactos");
            const modalImpactos = document.getElementById("modalImpactos");
            const cerrarImpactos = modalImpactos.querySelectorAll(".cerrarImpactos");

            btnImpactos.addEventListener("click", () => modalImpactos.style.display = "flex");
            cerrarImpactos.forEach(btn => btn.addEventListener("click", () => modalImpactos.style.display = "none"));
            window.addEventListener("click", (e) => { if (e.target === modalImpactos) modalImpactos.style.display = "none"; });

            // Modal Configuración
            const btnConfig = document.getElementById("btnConfig");
            const modalConfig = document.getElementById("modalConfig");
            const cerrarConfig = modalConfig.querySelectorAll(".cerrarConfig");

            btnConfig.addEventListener("click", () => modalConfig.style.display = "flex");
            cerrarConfig.forEach(btn => btn.addEventListener("click", () => modalConfig.style.display = "none"));
            window.addEventListener("click", (e) => { if (e.target === modalConfig) modalConfig.style.display = "none"; });

            // Modal Tickets (Registro de Reporte)
            const btnTickets = document.getElementById("btnTickets");
            const modalTickets = document.getElementById("modalTickets");
            const cerrarTickets = modalTickets.querySelectorAll(".cerrarTickets");

            btnTickets.addEventListener("click", () => modalTickets.style.display = "flex");
            cerrarTickets.forEach(btn => btn.addEventListener("click", () => modalTickets.style.display = "none"));
            window.addEventListener("click", (e) => { if (e.target === modalTickets) modalTickets.style.display = "none"; });
        });
    </script>

</body>
</html>
